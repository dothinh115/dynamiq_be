{
    "defaultRole": {
        "name": "Admin"
    },
    "defaultUser": {
        "email": "dynamiq@admin.com",
        "password": "1234",
        "isRootUser": true
    },
    "defaultSetting": {
        "isInit": false
    },
    "routeDefinition": {
        "GET": {
            "method": "GET",
            "handler": "const result = await $repo.find(); return result"
        },
         "POST": {
            "method": "POST",
            "handler": "const result = await $repo.create($body); return result"
        },
         "PATCH": {
            "method": "PATCH",
            "handler": "const {id, ...data} = $body; const result = await $repo.update({id}, data); return result"
        },
         "DELETE": {
            "method": "DELETE",
            "handler": "const {id, ...data} = $body; const result = await $repo.update({id}, data); return result"
        }
    },
    "adminGuardMiddleware": {
        "name": "Route for root Admin",
        "method": null,
        "path": null,
        "isEnabled": true,
        "handler": "const user = $req.user; if(!user.isRootUser) return throw401();"
    },
    "column_definition": {
        "name": "column_definition",
        "isStatic": true,
        "columns": [
            { "name": "id", "type": "int", "isPrimary": true, "isGenerated": true, "isNullable": false, "isStatic": true },
            { "name": "name", "type": "varchar", "isNullable": false, "isStatic": true },
            { "name": "type", "type": "varchar", "isNullable": false, "isStatic": true },
            { "name": "isGenerated", "type": "boolean", "isNullable": false, "isStatic": true, "default": false },
            { "name": "isPrimary", "type": "boolean", "isNullable": false, "isStatic": true, "default": false },
            { "name": "isNullable", "type": "boolean", "isStatic": true, "default": true },
            { "name": "isStatic", "type": "boolean", "isNullable": false, "isStatic": true, "default": false },
            { "name": "default", "type": "simple-json", "isNullable": true, "isStatic": true },
            { "name": "enumValues", "type": "simple-json", "isNullable": true, "isStatic": true },
            { "name": "isUnique", "type": "boolean", "isNullable": true, "isStatic": true, "default": false },
            { "name": "isUpdatable", "type": "boolean", "isNullable": false, "isStatic": true, "default": true }
        ],
        "relations": [
            {
                "propertyName": "table",
                "type": "many-to-one",
                "targetTable": "table_definition",
                "isStatic": true,
                "inversePropertyName": "columns",
                "isInverseEager": true
            }
        ]
    },
    "relation_definition": 
        {
        "name": "relation_definition",
        "isStatic": true,
        "columns": [
            { "name": "id", "type": "int", "isPrimary": true, "isGenerated": true, "isNullable": false, "isStatic": true },
            { "name": "type", "type": "enum", "isNullable": false, "isStatic": true, "enumValues": ["one-to-one", "many-to-one", "one-to-many", "many-to-many"] },
            { "name": "propertyName", "type": "varchar", "isNullable": false, "isStatic": true },
            { "name": "inversePropertyName", "type": "varchar", "isNullable": true, "isStatic": true },
            { "name": "isEager", "type": "boolean", "isNullable": false, "isStatic": true, "default": false },
            { "name": "isNullable", "type": "boolean", "isNullable": false, "isStatic": true, "default": true },
            { "name": "isStatic", "type": "boolean", "isNullable": false, "isStatic": true, "default": false },
            { "name": "isInverseEager", "type": "boolean", "isNullable": false, "isStatic": true, "default": false }
        ],
        "relations": [
            { "propertyName": "sourceTable", "type": "many-to-one", "targetTable": "table_definition", "isStatic": true, "inversePropertyName": "relations", "isInverseEager": true },
            { "propertyName": "targetTable", "type": "many-to-one", "targetTable": "table_definition", "isStatic": true }
        ]

    },
    "table_definition": {
        "name": "table_definition",
        "isStatic": true,
        "columns": [
            { "name": "id", "type": "int", "isPrimary": true, "isGenerated": true, "isNullable": false, "isStatic": true },
            { "name": "name", "type": "varchar", "isNullable": false, "isStatic": true, "isUnique": true },
            { "name": "isStatic", "type": "boolean", "isNullable": false, "isStatic": true, "default": false },
            { "name": "unique", "type": "simple-json", "isNullable": true, "isStatic": true }
        ]
    },
    "user_definition": 
    {
        "name": "user_definition",
        "isStatic": true,
        "columns": [
            { "name": "id", "type": "uuid", "isPrimary": true, "isGenerated": true, "isNullable": false, "isStatic": true },
            { "name": "email", "type": "varchar", "isNullable": false, "isStatic": true, "default": null },
            { "name": "password", "type": "varchar", "isNullable": false, "isStatic": true, "default": null },
            { "name": "isRootUser", "type": "boolean", "isNullable": false, "isStatic": true, "default": false }
        ],
        "relations": [
            { "propertyName": "role", "type": "many-to-one", "targetTable": "role_definition", "isStatic": true, "inversePropertyName": "users" }
        ]
    },
    "setting_definition": {
        "name": "setting_definition",
        "isStatic": true,
        "columns": [ { "name": "id", "type": "int", "isPrimary": true, "isGenerated": true, "isNullable": false, "isStatic": true }, { "name": "isInit", "type": "boolean", "isNullable": false, "isStatic": true, "default": false } ],
        "relations": []
    },
    "route_definition": {
        "name": "route_definition",
        "isStatic": true,
        "unique": ["path", "method"],
        "columns": [
            { "name": "id", "type": "int", "isPrimary": true, "isGenerated": true, "isNullable": false, "isStatic": true },
            { "name": "method", "type": "varchar", "isNullable": false, "isStatic": true, "default": "GET" },
            { "name": "path", "type": "varchar", "isNullable": false, "isStatic": true, "default": null },
            { "name": "handler", "type": "text", "isNullable": false, "isStatic": true, "default": null },
            { "name": "isPublished", "type": "boolean", "isNullable": false, "isStatic": true, "default": true },
            { "name": "isEnabled", "type": "boolean", "isNullable": true, "isStatic": true, "default": false }
        ],
        "relations": [
            { "propertyName": "targetTables", "type": "many-to-many", "targetTable": "table_definition", "isStatic": true, "isEager": true }
        ]
    },
    "role_definition": {
        "name": "role_definition",
        "isStatic": true,
        "columns": [
            { "name": "id", "type": "int", "isPrimary": true, "isGenerated": true, "isNullable": false, "isStatic": true },
            { "name": "name", "type": "varchar", "isNullable": false, "isStatic": true, "default": null }
        ]
    },
    "middleware_definition": {
        "name": "middleware_definition",
        "isStatic": true,
        "columns": [
            { "name": "id", "type": "int", "isPrimary": true, "isGenerated": true, "isNullable": false, "isStatic": true },
            { "name": "name", "type": "varchar", "isNullable": false, "isStatic": true },
            { "name": "method", "type": "varchar", "isNullable": true, "isStatic": true },
            { "name": "path", "type": "varchar", "isNullable": true, "isStatic": true },
            { "name": "handler", "type": "text", "isNullable": false, "isStatic": true },
            { "name": "isEnabled", "type": "boolean", "isNullable": false, "isStatic": true, "default": false }
        ],
        "relations": []
    },
    "hook_definition": {
        "name": "hook_definition",
        "isStatic": true,
        "columns": [
            { "name": "id", "type": "int", "isPrimary": true, "isGenerated": true, "isNullable": false, "isStatic": true },
            { "name": "method", "type": "varchar", "isNullable": false, "isStatic": true, "default": "GET" },
            { "name": "path", "type": "varchar", "isNullable": false, "isStatic": true },
            { "name": "handler", "type": "text", "isNullable": false, "isStatic": true },
            { "name": "type", "type": "varchar", "isNullable": false, "isStatic": true, "default": "beforeHandler" }
        ]
    }
}



